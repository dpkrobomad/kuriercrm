<odoo>
	<data>

        <record id="deepu_sale_tracking_event_rec" model="ir.actions.act_window">
            <field name="name">Events</field>
            <field name="res_model">deepu.sale.events</field>
            <field name="view_mode">tree,form</field>
            <field name="help" type="html">
                <p class="o_view_nocontent_smiling_face">Create the first shipment event</p>
            </field>
         </record>
         <record id="deepu_sale_tracking_event_form" model="ir.ui.view">
            <field name="name">deepu.sale.events.form</field>
			<field name="model">deepu.sale.events</field>
            <field name="arch" type="xml">
                <form string="Events" >
                    <group>
                        <group><field name="internal_reference" decoration-bf="1"/></group>
                        <group><field name="name"/></group>
                    </group>
                </form>
            </field>
        </record>
         <record id="deepu_sale_tracking_event_tree" model="ir.ui.view">
            <field name="name">deepu.sale.events.tree</field>
			<field name="model">deepu.sale.events</field>
            <field name="arch" type="xml">
                <tree string="Events" sample="1">
                    <field name="internal_reference" decoration-bf="1"/>
                    <field name="name"/>
                </tree>
            </field>
        </record>
        

        <record id="view_tracking_search" model="ir.ui.view">
            <field name="name">deepu.sale.tracking.search</field>
            <field name="model">deepu.sale.tracking</field>
            <field name="arch" type="xml">
                <search string="Search Tracking">
                    <field name="name" string="Number"/>
                    <field name="partner_id"/>
                    <field name="po_number"/>
                    <field name="consignee"/>
                    <field name="shipper"/>
                </search>
            </field>
        </record>

        <record id="deepu_sale_tracking_rec" model="ir.actions.act_window">
            <field name="name">Tracking</field>
            <field name="res_model">deepu.sale.tracking</field>
            <field name="view_mode">tree,form</field>
            <field name="help" type="html">
                <p class="o_view_nocontent_smiling_face">Create the first shipment tracking</p>
            </field>
        </record>
        
		<record id="sale_tracking_view_form" model="ir.ui.view">
			<field name="name">sale.tracking.form</field>
			<field name="model">deepu.sale.tracking</field>
			<field name="arch" type="xml">
                <form string="Tracking" class="o_sale_order" js_class="sale_discount_form">
                    <header>
                        <!--  <field name="authorized_transaction_ids" invisible="1"/>
                        <button name="payment_action_capture" type="object" data-hotkey="shift+g"
                                string="Capture Transaction" class="oe_highlight"
                                attrs="{'invisible': [('authorized_transaction_ids', '=', [])]}"/>
                        <button name="payment_action_void" type="object"
                                string="Void Transaction" data-hotkey="shift+v"
                                confirm="Are you sure you want to void the authorized transaction? This action can't be undone."
                                attrs="{'invisible': [('authorized_transaction_ids', '=', [])]}"/>
                        <button name="%(sale.action_view_sale_advance_payment_inv)d" string="Create Invoice"
                            type="action" class="btn-primary" data-hotkey="q"
                            attrs="{'invisible': [('invoice_status', '!=', 'to invoice')]}"/>
                        <button name="%(sale.action_view_sale_advance_payment_inv)d" string="Create Invoice"
                            type="action" context="{'default_advance_payment_method': 'percentage'}" data-hotkey="q"
                            attrs="{'invisible': ['|',('invoice_status', '!=', 'no'), ('state', '!=', 'sale')]}"/>
                        <button name="action_quotation_send" string="Send by Email" type="object" states="draft" class="btn-primary" data-hotkey="g"/>
                        <button name="action_quotation_send" type="object" string="Send PRO-FORMA Invoice"
                        groups="sale.group_proforma_sales" class="btn-primary"
                        attrs="{'invisible': ['|', ('state', '!=', 'draft'), ('invoice_count','&gt;=',1)]}" context="{'proforma': True}"/>
                        <button name="action_confirm" id="action_confirm" data-hotkey="v"
                            string="Confirm" class="btn-primary" type="object"
                            attrs="{'invisible': [('state', 'not in', ['sent'])]}"/>
                        <button name="action_confirm" data-hotkey="v"
                            string="Confirm" type="object"
                            attrs="{'invisible': [('state', 'not in', ['draft'])]}"/>
                        <button name="action_quotation_send" type="object" string="Send PRO-FORMA Invoice" groups="sale.group_proforma_sales" attrs="{'invisible': ['|', ('state', '=', 'draft'), ('invoice_count','&gt;=',1)]}" context="{'proforma': True}"/>
                        <button name="action_quotation_send" string="Send by Email" type="object" states="sent,sale" data-hotkey="g"/>
                        <button name="action_cancel" type="object" string="Cancel" attrs="{'invisible': ['|', ('state', 'not in', ['draft', 'sent','sale']), ('id', '=', False)]}" data-hotkey="z"/> -->
                        <button name="action_booked" confirm="Do you want to set state to Booked?" states="draft" type="object" string="Set to Booked" />
                        <button name="action_departed" confirm="Do you want to set state to Departed?" states="booked" type="object" string="Set to Departed" />
                        <button name="action_transpotation" confirm="Do you want to set state to Transportation ?" states="departed" type="object" string="Set to Transportation" />
                        <button name="action_arrived" confirm="Do you want to set state to Arrived ?" states="transit" type="object" string="Set to Arrived" />
                        <button name="action_clearance" confirm="Do you want to set state to Under Clearance ?" states="arrived" type="object" string="Set to Under Clearance" />
                        <button name="action_out_for_delivery" confirm="Do you want to set state to Out For Delivery ?" states="clearance" type="object" string="Set to Out For Delivery" />
                        <button name="action_delivered" confirm="Do you want to set state to Delivered ?" states="out" type="object" string="Set to Delivered" />
                        <button name="action_cencel" confirm="Do you want to set state to Cancel ?"  attrs="{'invisible':[('state','in',['delivered','cancel'])]}" type="object" string="Cancel Shipping" />
                        <button name="action_set_draft" confirm="Do you want to set state to Draft ?"  attrs="{'invisible':[('state','in',['draft'])]}" type="object" string="Set to Draft" />
                        <button name="action_set_to_prev" confirm="Do you want to set state back to previous state ?" attrs="{'invisible':[('state','in',['draft','delivered','booked','arrived','clearance','out','departed','transit'])]}"  type="object" string="Set To Prev State" />
                        <button name="action_print_pod" type="object" string="Print POD" states="out" class="btn-primary"/>
                        <!-- attrs="{'invisible':[('state','in',['draft','delivered','booked','arrived','departed','transit'])]}" -->
                        <field name="state" widget="statusbar" />
                    </header> 
				
                    <sheet>
                        <!-- <div class="oe_button_box" name="button_box">
                            <button name="preview_sale_order"
                                type="object"
                                class="oe_stat_button"
                                icon="fa-globe icon">
                                <div class="o_field_widget o_stat_info">
                                    <span class="o_stat_text">Quotation</span>
                                    <span class="o_stat_text">Preview</span>
                                </div>
                            </button>
                            <button name="action_view_invoice"
                                type="object"
                                class="oe_stat_button"
                                icon="fa-pencil-square-o"
                                attrs="{'invisible': [('invoice_count', '=', 0)]}">
                                <field name="invoice_count" widget="statinfo" string="Invoices"/>
                            </button>
                        </div> -->
                        <div class="oe_title">
                            <h1>
                                <field name="name" readonly="1"/>
                            </h1>
                        </div>
                        <group name="tracking_header">
                            <group name="shipping_details">
                                
                                <field name="date_created"/>
                                <field name="partner_id"></field>
                                <field name="po_number"></field>
                                <field name="sale_order_id" readonly="1" />
                                <field name="shipmentType" readonly="1"/>
                                <field name="shipmentTerms" readonly="1"/>
                                <field name="shipper" required="1"/>
                                <field name="consignee" required="1"/>

                                <field name="sailing_status" readonly="1"/>
                                <field name="shipping_line" />
                                <field name="transit_time" />
                                <field name="transit_delay" />
                                
                                
                                <field name="container_type" />
                                <field name="container_teu" />
                                
                                <field name="booking_no" />
                                <!-- <field name="shipsgo_checking_status"  />
                                <field name="is_shipsgo_tracking" />
                                <field name="is_tracking_done" /> -->
                               

                            </group>
                            <group name="container_details">
                                <field name="scheduled_departure"/>
                                <field name="scheduled_arrival"/>
                                <field name="actual_departure"/>
                                <field name="actual_arrival"/>
                                <field name="final_delivery_place" />
                                <field name="final_delivery_date" />
                                <field name="empty_return_date" />
                                <field name="gate_out_date" />
                                <field name="Flight_Vessel_Schedule"/>
                                <field name="date_of_delivery" attrs="{'invisible':[('state', '=', 'draft'),('state', '=', 'booked'),('state', '=', 'departed'),('state', '=', 'transit'),('state', '=', 'clearance'),('state', '=', 'out')]}"/>
                                <field name="totalCW" readonly="1"/>
                                <field name="required_attention"/>
                                <field name="sent_action_email"/>
                                <field name="oceanBillOfLading" attrs="{'invisible':['|','|',('shipmentType','=','Air Freight'),('shipmentType','=','Courier Service'),('shipmentType','=','Road Freight')]}"  />
                                <field name="awb" attrs="{'invisible':['|','|',('shipmentType','=','FCL'),('shipmentType','=','LCL'),('shipmentType','=','Road Freight')]}"   />
                                <field name="billOfLading" attrs="{'invisible':['|','|','|',('shipmentType','=','Air Freight'),('shipmentType','=','Courier Service'),('shipmentType','=','LCL'),('shipmentType','=','FCL')]}"   />
                                <!-- <field name="container_number"  /> -->
                                <field name="container_number" attrs="{'invisible':['|','|',('shipmentType','=','Air Freight'),('shipmentType','=','Courier Service'),('shipmentType','=','Road Freight')]}" />
                                <field name="is_transshipment"  attrs="{'invisible':[('shipmentType','!=','LCL')]}"  />
                                <field name="container_numbers" widget="one2many_list"  attrs="{'invisible':['|',('is_transshipment','=',False),('shipmentType','!=','LCL')]}" >
                                    <tree editable="bottom">
                                        <field name="name"/>
                                        <!-- Add other fields as necessary -->
                                    </tree>
                                </field>
                                <!-- <field name="oceanBillOfLading" attrs="{'invisible': [('shipmentType', 'not in', ['FCL', 'LCL'])]}"  />
                    <field name="awb" attrs="{'invisible': [('shipmentType', 'not in', ['Air Freight', 'Courier Service'])]}" />
                    <field name="billOfLading" attrs="{'invisible': [('shipmentType', 'not in', ['Road Freight'])]}"    /> -->
                            </group>
                            
                            
                        </group>
                        <group>
                            <field name="remarks" />
                        </group>
                        <notebook>
					        <page string="Tracking Events" name="tracking_events"  >
                                <field name="event_line_ids" mode="tree" context="{'default_deepu_sale_tracking_id': active_id,}">
                                    <tree editable="bottom">
                                        <field name="event"/>
                                        <field name="date"/>
                                        <field name="location"/>
                                        <field name="comments"/>
                                    </tree>
                                </field>
                            </page>
                            <page string="Vessels" name="tracking_vessels">
                                <field name="vessels_line_ids" mode="tree" context="{'default_deepu_sale_tracking_id': active_id,}">
                                    <tree editable="bottom">
                                        <field name="vessel"/>
                                        <field name="VesselIMO"/>
                                        <field name="Port"/>
                                        <field name="ArrivalDate"/>
                                        <field name="DepartureDate"/>
                                        <field name="voyage"/>
                                        <field name="departure"/>
                                        <field name="delivery"/>
                                    </tree>
                                </field>
                            </page>
                            <page string="BL Containers" name="tracking_blcontainers">
                                <field name="blcontainers" mode="tree" context="{'default_deepu_sale_tracking_id': active_id,}">
                                    <tree editable="bottom">
                                        <field name="name"/>
                                        <field name="ContainerTEU"/>
                                        <field name="ContainerType"/>
                                        <field name="BLGateOutDate"/>
                                        <field name="BLEmptyReturnDate"/>
            
                                    </tree>
                                </field>
                            </page>
                            <page string="Documents" name="tracking_docs">
                                <field name="docs_line_ids" mode="tree" context="{'default_deepu_sale_tracking_id': active_id,}">
                                    <tree editable="bottom">
                                       
                                         <field name="file" filename="file_name" />
                                         <field name="file_name"  />
                                         <!-- <field name="url"  /> -->
                                        
                                    </tree>
                                </field>
                            </page>
                        </notebook>      
                    </sheet>
                    <div class="oe_chatter">
                        <field name="message_follower_ids"/>
                        <field name="activity_ids"/>
                        <field name="message_ids"/>
                    </div>
                </form>
			</field>
		</record>

        <record id="sale_tracking_view_tree" model="ir.ui.view">
            <field name="name">sale.tracking.tree</field>
			<field name="model">deepu.sale.tracking</field>
            <field name="arch" type="xml">
                <tree string="Tracking" sample="1">
                    <!-- Core / Reference -->
                    <field name="name" string="Number" readonly="1" decoration-bf="1"/>
                    <field name="partner_id" readonly="1"/>
                    <field name="contact" optional="hide"/>
                    <field name="date_created" readonly="1" string="Created At" optional="show"/>
                    <field name="sale_order_id" optional="show"/>
                    <field name="po_number" optional="hide"/>

                    <!-- Shipment type & terms -->
                    <field name="shipmentType" optional="show"/>
                    <field name="shipmentTerms" optional="show"/>

                    <!-- Cargo -->
                    <field name="no_of_pcs" optional="hide"/>
                    <field name="totalCW" optional="hide"/>

                    <!-- Schedule & dates -->
                    <field name="scheduled_departure" optional="show" widget="datetime"/>
                    <field name="scheduled_arrival" optional="show" widget="datetime"/>
                    <field name="actual_departure" optional="show" widget="datetime"/>
                    <field name="actual_arrival" optional="show" widget="datetime"/>
                    <field name="gate_out_date" optional="hide" widget="date"/>
                    <field name="final_delivery_date" optional="hide" widget="date"/>
                    <field name="date_of_delivery" optional="hide" widget="datetime"/>
                    <field name="empty_return_date" optional="hide"/>

                    <!-- Location & logistics -->
                    <field name="shipper" optional="hide"/>
                    <field name="consignee" optional="hide"/>
                    <field name="final_delivery_place" optional="hide"/>
                    <field name="Flight_Vessel_Schedule" optional="hide"/>

                    <!-- Transit -->
                    <field name="transit_time" optional="hide"/>
                    <field name="transit_delay" optional="hide"/>
                    <field name="shipping_line" optional="hide"/>
                    <field name="sailing_status" optional="hide"/>
                    <field name="booking_no" optional="hide"/>

                    <!-- Container -->
                    <field name="container_type" optional="hide"/>
                    <field name="container_teu" optional="hide"/>
                    <field name="container_number" optional="hide"/>
                    <field name="is_transshipment" optional="hide" widget="boolean_toggle"/>
                    <field name="BLContainerCount" optional="hide"/>

                    <!-- Documents -->
                    <field name="oceanBillOfLading" optional="hide"/>
                    <field name="awb" optional="hide"/>
                    <field name="billOfLading" optional="hide"/>

                    <!-- Flags & status -->
                    <field name="required_attention" optional="hide" widget="boolean_toggle"/>
                    <field name="sent_action_email" optional="hide" widget="boolean_toggle"/>
                    <field name="is_shipsgo_tracking" optional="hide" widget="boolean_toggle"/>
                    <field name="is_tracking_done" optional="hide" widget="boolean_toggle"/>
                    <field name="is_invoiced" optional="hide" widget="boolean_toggle"/>
                    <field name="shipsgo_checking_status" optional="hide"/>
                    <field name="co2" optional="hide"/>

                    <!-- State & notes -->
                    <field name="state"
                        decoration-primary="state == 'arrived'"
                        decoration-success="state == 'delivered'"
                        decoration-info="state == 'booked'"
                        decoration-warning="state == 'departed'"
                        decoration-muted="state == 'transit'"
                        decoration-bf="state == 'clearance'"
                        decoration-it="state == 'out'"
                        widget="badge" optional="show"/>
                    <field name="remarks" optional="hide"/>
                </tree>
            </field>
        </record>

        <menuitem id="tracking_menu_root"
            name="Tracking"
            web_icon="deepu_sale,static/description/track.png"
            active="True"
            
            sequence="31"/>

        <menuitem  id="tracking_menu_tracking" name="Tracking" action="deepu_sale_tracking_rec"   parent="tracking_menu_root" sequence="0" />
        <menuitem  id="tracking_menu_events" name="Events" action="deepu_sale_tracking_event_rec"   parent="tracking_menu_root" sequence="1" />
		
		</data>
</odoo>
