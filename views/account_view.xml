<?xml version="1.0" encoding="utf-8"?>
<odoo>
	<data>
		<record id="account_move_view_form_inherit_account_view" model="ir.ui.view">
			<field name="name">account.move.form</field>
			<field name="model">account.move</field>
			<field name="inherit_id" ref="account.view_move_form"/>
			<field name="arch" type="xml">


                <xpath expr="//field[@name='partner_id']" position="after">
					<field name="move_type" invisible="1" />
					<field name="contact_person" attrs="{'invisible': [('move_type', 'not in', ('in_invoice', 'out_invoice'))]}" />
					<field name="shipper" attrs="{'invisible': [('move_type', 'not in', ('in_invoice', 'out_invoice'))] }"/>
					<field name="consignee" attrs="{'invisible': [('move_type', 'not in', ('in_invoice', 'out_invoice'))] }"/>	 
                    <field name="po_number" attrs="{'invisible': [('move_type', 'not in', ('in_invoice', 'out_invoice'))] }" />	
					<field name="typeOfShipment" no_create="true" attrs="{'invisible': [('move_type', 'not in', ('in_invoice', 'out_invoice'))] }"  />
					<field name="ts" invisible="1"/>
					<field name="shipmentTerms" no_create="true" attrs="{'invisible': [('move_type', 'not in', ('in_invoice', 'out_invoice'))] }"  />
					<field name="st" invisible="1"/>
					<field name="commodityType" attrs="{'invisible': [('move_type', 'not in', ('in_invoice', 'out_invoice'))] }" />
					<field name="tracking_id" attrs="{'invisible': [('move_type', 'not in', ('in_invoice', 'out_invoice'))] }" />
					<field name="sale_id" attrs="{'invisible': [('move_type', 'not in', ('in_invoice', 'out_invoice'))] }" />
                    

                </xpath>
				<xpath expr="//field[@name='invoice_line_ids']//field[@name='price_unit']" position="before">
					<field name="price_unit_foreign" string="Price (Foreign)" force_save="1" attrs="{'invisible': ['|', '|', ('parent.move_type', '!=', 'in_invoice'), ('parent.currency_selection', 'in', ['AED']), ('display_type', 'in', ('line_section', 'line_note'))]}"/>
				</xpath>
				<xpath expr="//field[@name='invoice_line_ids']" position="after">
				 	<field name="custom_terms" attrs="{'invisible': [('move_type', 'not in', ('in_invoice', 'out_invoice'))] }" />
				</xpath>
				<xpath expr="//field[@name='payment_reference']" position="after">
				 	<field name="exchange_rates" attrs="{'invisible': [('move_type', 'not in', ('in_invoice', 'out_invoice'))] }" />
				</xpath>

				<xpath expr="//field[@name='tax_totals_json']" position="before">
					<field name="amount_total_in_selected_currency" string="Total in USD" attrs="{'invisible': ['|', ('move_type', '!=', 'in_invoice'), ('currency_selection', '!=', 'USD')]}"/>
					<field name="amount_total_in_selected_currency" string="Total in EUR" attrs="{'invisible': ['|', ('move_type', '!=', 'in_invoice'), ('currency_selection', '!=', 'EUR')]}"/>
					<field name="amount_total_in_selected_currency" string="Total in GBP" attrs="{'invisible': ['|', ('move_type', '!=', 'in_invoice'), ('currency_selection', '!=', 'GBP')]}"/>
					<field name="is_loss" invisible="1"/>
					<field name="profit_and_loss" string="Profit in AED" attrs="{'invisible': ['|',('is_loss','=',True),('move_type','!=','out_invoice')]}" class="text-success"/>
					<field name="profit_and_loss" string="Loss in AED" attrs="{'invisible': ['|',('is_loss','=',False),('move_type','!=','out_invoice')]}" class="text-danger"/>
				</xpath>
				
				<xpath expr="//field[@name='invoice_date']" position="after">
					
						<field name="portOfLoading" invisible="0" attrs="{'invisible': [('move_type', 'not in', ('in_invoice', 'out_invoice'))] }"  />
						<field name="portOfDestination"  attrs="{'invisible': [('move_type', 'not in', ('in_invoice', 'out_invoice'))] }" />
						<field name="originCountry" attrs="{'invisible': [('move_type', 'not in', ('in_invoice', 'out_invoice'))] }"  />
						<field name="destinationCountry" attrs="{'invisible': [('move_type', 'not in', ('in_invoice', 'out_invoice'))] }"  />
						<field name="no_of_pcs" attrs="{'invisible': [('move_type', 'not in', ('in_invoice', 'out_invoice'))] }"  />
						<field name="oceanBillOfLading" attrs="{'invisible':['|','|','|',('ts','=','Air Freight'),('ts','=','Courier Service'),('ts','=','Road Freight'),('move_type', 'not in', ('in_invoice', 'out_invoice'))]}"  />
						<field name="awb" attrs="{'invisible':['|','|','|',('ts','=','FCL'),('ts','=','LCL'),('ts','=','Road Freight'),('move_type', 'not in', ('in_invoice', 'out_invoice'))]}"   />
						<field name="billOfLading" attrs="{'invisible':['|','|','|','|',('ts','=','Air Freight'),('ts','=','Courier Service'),('ts','=','LCL'),('ts','=','FCL'),('move_type', 'not in', ('in_invoice', 'out_invoice'))]}"   />
						<field name="show_sib_account"/>
						<field name="currency_selection" attrs="{'invisible': [('show_sib_account', '=', True)] }" />
				</xpath>
				<xpath expr="//field[@name='payment_reference']" position="after">
					<field name="ref" attrs="{'invisible': [('move_type', 'not in', ('in_invoice', 'out_invoice'))] }" />
				</xpath>


                <xpath expr="//form/sheet/notebook/page[@id='invoice_tab']" position="after">

					<page string="Cargo Details" name="product_information" attrs="{'invisible':['|',('ts', '=', 'FCL'),('move_type', 'not in', ('in_invoice', 'out_invoice'))]}"  >
						<field name="product_line_ids" mode="tree" context="{'default_account_move_id': active_id,}">
							<tree editable="bottom">
								<field name="length"/>
								<field name="width"/>
								<field name="height"/>
								<field name="totalpcs"/>
								<field name="volume"/>
								<field name="grossWeight"/>
								<field name="chargableWeight"/>
							</tree>
							</field>
							<group name="note_group_cargo" col="6" class="mt-2 mt-md-0">
								 
                                <group class="oe_subtotal_footer oe_right" colspan="2" name="weight_total">
                                    <field name="totalChargableWeight"   colspan="2"/>
                                </group>
                                <div class="oe_clear"/>
                            </group>
                    </page>
					<page string="Container Details" name="container_details" attrs="{'invisible':['|',('ts', '!=', 'FCL'),('move_type', 'not in', ('in_invoice', 'out_invoice'))]}"  >
						<field name="container_line_ids" mode="tree" context="{'default_account_move_id': active_id,}">
							<tree editable="bottom">
								<field name="typeOfContainer"/>
								<field name="noOfContainers"/>
								<field name="temperature" attrs="{'invisible':['|','|',('typeOfContainer','=','1'),('typeOfContainer','=','2'),('typeOfContainer','=','3')]}"/>
							</tree>
							</field>
                    </page>
					<page string="Vendor Details"  attrs="{'invisible':[('move_type','!=','out_invoice')]}" name="inv_vendor_bills">
						<field name="vendor_bill_ref" domain="[('move_type', '=', 'in_invoice')]" no_create='1'>
							<tree>

                                <field name="name"/>
                                <field name="partner_id"/>
                                <field name="amount_total_in_currency_signed"/>
                                <field name="payment_state"/>
                                <field name="state"/>

                            </tree>
						</field>
					</page>

				

				</xpath>


            </field>
		</record>
		<!-- <record id="view_account_move_tree_inherit" model="ir.ui.view">
            <field name="name">account.move.tree.inherit</field>
            <field name="model">account.move</field>
            <field name="inherit_id" ref="account.view_out_invoice_tree"/>
            <field name="arch" type="xml">
                <tree>
					<field name="invoice_date" position="before">

					<field name="shipper" string="Shipper Name" />
					<field name="typeOfShipment" string="Type Of Shipment" />
					<field name="shipmentTerms" string="Shipment Terms" />
					<field name="portOfLoading" string="Port of Loading" />
					<field name="originCountry" string="Origin Country" />
				</field>
                    
                </tree>
            </field>
        </record> -->


		<record id="view_account_move_tree_inherit" model="ir.ui.view">
			<field name="name">account.move.tree.inherit</field>
			<field name="model">account.move</field>
			<field name="inherit_id" ref="account.view_out_invoice_tree"/>
			<field name="arch" type="xml">
				<!-- Reference, contact, shipment, location, cargo (before invoice_date) -->
				<xpath expr="//field[@name='invoice_date']" position="before">
					<field name="contact_person" optional="hide"/>
					<field name="po_number" optional="hide"/>
					<field name="shipper" string="Shipper" optional="hide"/>
					<field name="consignee" optional="hide"/>
					<field name="typeOfShipment" string="Type Of Shipment" optional="hide"/>
					<field name="shipmentTerms" string="Shipment Terms" optional="hide"/>
					<field name="portOfLoading" string="Port of Loading" optional="hide"/>
					<field name="portOfDestination" optional="hide"/>
					<field name="originCountry" optional="hide"/>
					<field name="destinationCountry" optional="hide"/>
					<field name="no_of_pcs" optional="hide"/>
					<field name="totalChargableWeight" string="Total CW/CBM" optional="hide"/>
					<field name="cargoWeight" optional="hide"/>
					<field name="commodityType" optional="hide"/>
				</xpath>
				<!-- Sale & tracking refs (after invoice_origin) -->
				<xpath expr="//field[@name='invoice_origin']" position="after">
					<field name="sale_id" string="Quotation Ref." optional="hide"/>
					<field name="tracking_id" string="Tracking Ref." optional="hide"/>
				</xpath>
				<!-- Shipping documents (after ref) -->
				<xpath expr="//field[@name='ref']" position="after">
					<field name="oceanBillOfLading" optional="hide"/>
					<field name="awb" optional="hide"/>
					<field name="billOfLading" optional="hide"/>
					<field name="container_number" optional="hide"/>
				</xpath>
				<!-- Amounts & profit (after amount_total_in_currency_signed) -->
				<xpath expr="//field[@name='amount_total_in_currency_signed']" position="after">
					<field name="usd" string="Amount USD" optional="hide"/>
					<field name="eur" string="Amount EUR" optional="hide"/>
					<field name="gbp" string="Amount GBP" optional="hide"/>
					<field name="profit_and_loss" string="Profit/Loss AED" optional="hide"/>
					<field name="is_loss" optional="hide" widget="boolean_toggle"/>
				</xpath>
				<!-- Other (after amount_residual_signed) -->
				<xpath expr="//field[@name='amount_residual_signed']" position="after">
					<field name="exchange_rates" optional="hide"/>
					<field name="currency_selection" optional="hide"/>
					<field name="show_sib_account" optional="hide" widget="boolean_toggle"/>
				</xpath>
			</field>
		</record>

		<!-- Vendor bills tree: same custom optional fields as customer invoices + total_foreign -->
		<record id="view_in_invoice_tree_inherit_total_foreign" model="ir.ui.view">
			<field name="name">account.move.tree.inherit.in.invoice</field>
			<field name="model">account.move</field>
			<field name="inherit_id" ref="account.view_in_invoice_tree"/>
			<field name="arch" type="xml">
				<!-- Same custom fields as customer invoice tree -->
				<xpath expr="//field[@name='invoice_date']" position="before">
					<field name="contact_person" optional="hide"/>
					<field name="po_number" optional="hide"/>
					<field name="shipper" string="Shipper" optional="hide"/>
					<field name="consignee" optional="hide"/>
					<field name="typeOfShipment" string="Type Of Shipment" optional="hide"/>
					<field name="shipmentTerms" string="Shipment Terms" optional="hide"/>
					<field name="portOfLoading" string="Port of Loading" optional="hide"/>
					<field name="portOfDestination" optional="hide"/>
					<field name="originCountry" optional="hide"/>
					<field name="destinationCountry" optional="hide"/>
					<field name="no_of_pcs" optional="hide"/>
					<field name="totalChargableWeight" string="Total CW/CBM" optional="hide"/>
					<field name="cargoWeight" optional="hide"/>
					<field name="commodityType" optional="hide"/>
				</xpath>
				<xpath expr="//field[@name='invoice_origin']" position="after">
					<field name="sale_id" string="Quotation Ref." optional="hide"/>
					<field name="tracking_id" string="Tracking Ref." optional="hide"/>
				</xpath>
				<xpath expr="//field[@name='ref']" position="after">
					<field name="oceanBillOfLading" optional="hide"/>
					<field name="awb" optional="hide"/>
					<field name="billOfLading" optional="hide"/>
					<field name="container_number" optional="hide"/>
				</xpath>
				<xpath expr="//field[@name='amount_total_in_currency_signed']" position="after">
					<field name="usd" string="Amount USD" optional="hide"/>
					<field name="eur" string="Amount EUR" optional="hide"/>
					<field name="gbp" string="Amount GBP" optional="hide"/>
					<field name="total_foreign" string="Total Foreign" optional="show"/>
					<field name="profit_and_loss" string="Profit/Loss AED" optional="hide"/>
					<field name="is_loss" optional="hide" widget="boolean_toggle"/>
				</xpath>
				<xpath expr="//field[@name='amount_residual_signed']" position="after">
					<field name="exchange_rates" optional="hide"/>
					<field name="currency_selection" optional="hide"/>
					<field name="show_sib_account" optional="hide" widget="boolean_toggle"/>
				</xpath>
			</field>
		</record>

		
	</data>
</odoo>
