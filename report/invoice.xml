<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data>
        <template id="account.report_invoice_document">
            <xpath expr="." position="inside">
                <link rel="stylesheet" href="/deepu_sale/static/src/css/report.css"/>
            </xpath>
            <t t-call="web.external_layout">
                <t t-set="o" t-value="o.with_context(lang=lang)" />
                <t t-set="forced_vat" t-value="o.fiscal_position_id.foreign_vat"/> <!-- So that it appears in the footer of the report instead of the company VAT if it's set -->
                <t t-set="address" class="mt5">
                    <address t-field="o.partner_id" t-options='{"widget": "contact", "fields": ["address", "name"], "no_marker": True}' />
                    <div  t-if="o.partner_id.vat" class="mt16 deepu-cmp">
                        <t t-if="o.company_id.account_fiscal_country_id.vat_label" t-esc="o.company_id.account_fiscal_country_id.vat_label" id="inv_tax_id_label"/>
                        <t t-else="">Tax ID</t>: <span t-field="o.partner_id.vat"/></div>
                </t>
                <div class="page">
                    <h2>
                        <span t-if="o.move_type == 'out_invoice' and o.state == 'posted'">Invoice</span>
                        <span t-if="o.move_type == 'out_invoice' and o.state == 'draft'">Draft Invoice</span>
                        <span t-if="o.move_type == 'out_invoice' and o.state == 'cancel'">Cancelled Invoice</span>
                        <span t-if="o.move_type == 'out_refund'">Credit Note</span>
                        <span t-if="o.move_type == 'in_refund'">Vendor Credit Note</span>
                        <span t-if="o.move_type == 'in_invoice'">Vendor Bill</span>
                        <span t-if="o.name != '/'" t-field="o.name"/>
                    </h2>

                    <!-- <div id="informations" class="row mt32 mb32">
                        <div class="col-auto col-3 mw-100 mb-2" t-if="o.invoice_date" name="invoice_date">
                            <strong>Invoice Date:</strong>
                            <p class="m-0" t-field="o.invoice_date"/>
                        </div>
                        <div class="col-auto col-3 mw-100 mb-2" t-if="o.invoice_date_due and o.move_type == 'out_invoice' and o.state == 'posted'" name="due_date">
                            <strong>Due Date:</strong>
                            <p class="m-0" t-field="o.invoice_date_due"/>
                        </div>
                        <div class="col-auto col-3 mw-100 mb-2" t-if="o.invoice_origin" name="origin">
                            <strong>Source:</strong>
                            <p class="m-0" t-field="o.invoice_origin"/>
                        </div>
                        <div class="col-auto col-3 mw-100 mb-2" t-if="o.partner_id.ref" name="customer_code">
                            <strong>Customer Code:</strong>
                            <p class="m-0" t-field="o.partner_id.ref"/>
                        </div>
                        <div class="col-auto col-3 mw-100 mb-2" t-if="o.ref" name="reference">
                            <strong>Reference:</strong>
                            <p class="m-0" t-field="o.ref"/>
                        </div>
                        
                    </div> -->

                    <t t-set="display_discount" t-value="any(l.discount for l in o.invoice_line_ids)" />
                    <style>
                    td {
                        font-size:11px;
                    }
                    th {
                        font-size:11px;
                        min-width: 100px;
                    }
                    tr {
                        font-size:11px;
                    }
                    address {
                        font-size:12px;
                        margin-bottom:0px !important;
                    }
                    .address {
                        margin-top: 10px;
                        
                    }
                    .deepu-cmp {
                        font-size:12px;
                    }
                    
                    .deepu-hdr{
                        font-size:12px;
                    }
                    .deepu-pymt{
                        font-size:12px;

                    }
                    .deepu-cnt{
                        font-size:12px;

                    }
                    h5, .h5 {
                        font-size: 13px !important;
                    }
                    h2, .h2{
                        font-size: 15px !important;
                    }
                    .o_background_header {
                        display: flex;
                        justify-content: space-between;
                        align-items: center;
                    }

                    .float-left {
                        float: left;
                    }

                    .float-right {
                        display:none;
                    }

                    .company_address {
                        text-align: left;
                    }
                    p{
                        font-size:12px;
                    }
                    .clearfix.mb8 {
                        display:none;
                    }
                    .o_background_header img {
                        max-width: 25% !important;
                        align-self: baseline;
                    }



                    </style>
                   
                    <table class="table table-sm o_main_table">
                        <thead>
                            <tr class="text-center deepu-hdr"><h5 class="deepu-hdr" style="color: green; padding-bottom:10px; padding-top:10px;">Shipment Details - <span t-field="o.typeOfShipment" /> From <span t-field="o.originCountry" /> to <span t-field="o.destinationCountry" /> </h5></tr>
                        </thead>
                        
                        <tbody>
                            <tr>
                                <th style="font-size:11px;" colspan="1"><strong>Shipper</strong></th>
                                <td  colspan="2"><p t-field="o.shipper"/></td>
                                <th colspan="1" style="color:blue;"><strong>Consignee</strong></th>
                                <td  colspan="2"><p t-field="o.consignee"/></td>
                            </tr>
                            <tr>
                                <th  t-if="o.invoice_date"><strong>Invoice Date</strong></th>
                                <td  t-if="o.invoice_date"><p  t-field="o.invoice_date" t-options='{"widget": "date"}' /></td>
                                <th t-if="o.invoice_date_due and o.move_type == 'out_invoice' and o.state == 'posted'" name="due_date"><strong>Due Date</strong></th>
                                <td  t-if="o.invoice_date_due and o.move_type == 'out_invoice' and o.state == 'posted'" ><p class="m-0" t-field="o.invoice_date_due"/></td>
                                <th t-if="o.invoice_payment_term_id"><strong>Payment Terms</strong></th>
                                <td t-if="o.invoice_payment_term_id" ><p class="m-0" t-field="o.invoice_payment_term_id"/></td>
                            </tr>
                            <tr>
                                <th><strong>Client</strong></th>
                                <td ><p  t-field="o.partner_id" /></td>
                                <th><strong>Contact</strong></th>
                                <td ><p t-if="o.contact_person"  t-field="o.contact_person"></p></td>
                                <th><strong>PO Number</strong></th>
                                <td ><p  t-field="o.po_number" /></td>
                                <!-- <th><strong>PO Number</strong></th>
                                <td t-if="o.po_number"><p  t-field="o.po_number" /></td> -->
                                
                            </tr>
                            <tr>
                                
                                <td t-if="o.ts in ['FCL','LCL']"><strong>Bill Of Lading</strong></td>
                                <td  t-if="o.ts in ['FCL','LCL']"><p t-field="o.oceanBillOfLading" /></td>
                                <td  t-if="o.ts in ['Air Freight','Courier Service']"><strong>Air Way Bill</strong></td>
                                <td   t-if="o.ts in ['Air Freight','Courier Service']" ><p t-field="o.awb"/></td>
                                <td  t-if="o.ts in ['Road Freight']"><strong>Bill Of Lading</strong></td>
                                <td  t-if="o.ts in ['Road Freight']"><p t-field="o.billOfLading"/></td>
                                <th><strong>Quotation Ref.</strong></th>
                                <td ><p  t-field="o.sale_id" /></td>
                                <th><strong>Tracking Ref.</strong></th>
                                <td ><p  t-field="o.tracking_id"></p></td>
                            </tr>
                            <!-- <tr> -->
                                
                                <!-- <th><strong>Quotation Ref.</strong></th>
                                <td><p  t-field="o.sale_id" /></td>
                                <th><strong>Tracking Ref.</strong></th>
                                <td><p  t-field="o.tracking_id"></p></td> -->
                                <!-- <td t-if="o.ts in ['FCL','LCL']"><strong>Ocean Bill Of Lading</strong></td>
                                <td t-if="o.ts in ['FCL','LCL']"><p t-field="o.oceanBillOfLading" /></td>
                                <td t-if="o.ts in ['Air Freight','Courier Service']"><strong>Air Way Bill</strong></td>
                                <td  t-if="o.ts in ['Air Freight','Courier Service']" ><p t-field="o.awb"/></td>
                                <td t-if="o.ts in ['Road Freight']"><strong>Bill Of Lading</strong></td>
                                <td t-if="o.ts in ['Road Freight']"><p t-field="o.billOfLading"/></td> -->

                             <!-- </tr> -->
                            <tr>
                                <td><strong>Shipment Type</strong></td>
                                <td><p t-field="o.typeOfShipment"/></td>
                                <td><strong>Shipment Terms</strong></td>
                                <td><p t-field="o.shipmentTerms" /></td>
                                <td><strong>Commodity</strong></td>
                                <td><p t-field="o.commodityType" /></td>
                            </tr>
                            <tr>
                                <th colspan="1"><strong>Port of Loading</strong></th>
                                <td colspan="1" t-if="o.portOfLoading"><p t-field="o.portOfLoading" /> </td>
                                <th colspan="1"><strong>Port of Destination</strong></th>
                                <td colspan="1" t-if="o.portOfDestination" ><p t-field="o.portOfDestination" /></td>
                                <th>CW</th>
                                <td t-if="o.totalChargableWeight"><p t-field="o.totalChargableWeight" /></td>
                            </tr>
                            
                            <tr>
                                <th><strong>ATD</strong></th>
                                <td colspan="2" t-if="o.tracking_id.actual_departure" ><p t-esc="o.tracking_id.actual_departure.strftime('%d %b  %Y %I:%M %p')"   /></td>
                                <th><strong>ATA</strong></th>
                                <td colspan="2"  t-if="o.tracking_id.actual_arrival" ><p t-esc="o.tracking_id.actual_arrival.strftime('%d %b %Y %I:%M %p')"  /></td>
                                
                            </tr>
                        </tbody>
                    </table>


                                                                                
                    <!-- <table class="table table-sm o_main_table">
                        <thead>
                            <tr class="text-center"><h5 style="color: green;  padding-bottom:10px; padding-top:10px;">Cargo Details </h5></tr>
                            <tr  class="mb-0 text-right"  >
                                <td><strong>L(CM)</strong></td>
                                <td><strong>W(CM)</strong></td>
                                <td><strong>H(CM)</strong></td>
                                <td><strong>Pieces</strong></td>
                                <td><strong>VW/CBM</strong></td>
                                <td><strong>GW</strong></td>
                                <td><strong>CW</strong></td>
                            </tr>
                        </thead>
                        <tbody>
                            
                            <t t-foreach="o.product_line_ids" t-as="pline">
                                <tr  class="mb-0 text-right"   >
                                    <td><span t-field="pline.length" /></td>
                                    <td><span t-field="pline.width" /></td>
                                    <td><span t-field="pline.height" /></td>
                                    <td><span t-field="pline.totalpcs" /></td>
                                    <td><span t-field="pline.volume" /></td>
                                    <td><span t-field="pline.grossWeight" /></td>
                                    <td><span t-field="pline.chargableWeight" /></td>
                                </tr>
                            </t>
                                                
                        </tbody>
                                            
                        <tfoot>
                            <tr  class="mb-0 text-right"  >
                                <td></td>
                                <td colspan="2">No. Of Pieces</td>
                       
                                <td><span t-field="o.no_of_pcs" /></td>
                                <td ></td>
                                <td><strong>Total CW</strong></td>
                                <td><span t-field="o.totalChargableWeight" /></td>
                            </tr>
                        </tfoot>
                    </table> -->

                    <!-- FCL table  -->
                    <!-- <table t-if="o.ts =='FCL'" class="table table-sm o_main_table">
                        <thead style="display: table-row-group">
                            <tr  class="mb-0 text-right"  >
                                <td><strong>Container Type</strong></td>
                                <td><strong>No.s</strong></td>
                                <td><strong>Temperature</strong></td>
                            </tr>
                        </thead>
                        <tbody class="sale_tbody">
                            <t t-foreach="o.container_line_ids" t-as="sealine">
                                <tr  class="mb-0 text-right"   >
                                    <td><span t-field="sealine.typeOfContainer" /></td>
                                    <td><span t-field="sealine.noOfContainers" /></td>
                                    <td t-if="sealine.typeOfContainer =='4'"><span t-field="sealine.temperature" /></td>
                                </tr>
                            </t>
                            
                        </tbody>
                        
                        <tfoot>
                            <hr/>
                            <tr  class="mb-0 text-right"  >
                                <td >Total Weight</td>
                                <td><strong t-field="o.cargoWeight"/></td>
                             
                            </tr>
                        </tfoot>
                    </table> -->
                    <!-- <p style="page-break-before:always;"> </p>  -->
                    <br/>
                    <table class="table table-sm o_main_table" name="invoice_line_table">
                        <thead>
                            <tr class="text-center"><h5 style="color: green;">Charges</h5></tr>
                            <tr>
                                <th name="th_description" class="text-left"><span>Description</span></th>
                                <th name="th_quantity" class="text-right"><span>Quantity</span></th>
                                <th name="th_priceunit" t-attf-class="text-right {{ 'd-none d-md-table-cell' if report_type == 'html' else '' }}"><span>Unit Price</span></th>
                                <th name="th_price_unit" t-if="display_discount" t-attf-class="text-right {{ 'd-none d-md-table-cell' if report_type == 'html' else '' }}">
                                    <span>Disc.%</span>
                                </th>
                                <th name="th_taxes" t-attf-class="text-left {{ 'd-none d-md-table-cell' if report_type == 'html' else '' }}"><span>Taxes</span></th>
                                <th name="th_subtotal" class="text-right">
                                    <span groups="account.group_show_line_subtotals_tax_excluded">Amount</span>
                                    <span groups="account.group_show_line_subtotals_tax_included">Total Price</span>
                                </th>
                            </tr>
                        </thead>
                        <tbody class="invoice_tbody">
                            <t t-set="current_subtotal" t-value="0"/>
                            <t t-set="lines" t-value="o.invoice_line_ids.sorted(key=lambda l: (-l.sequence, l.date, l.move_name, -l.id), reverse=True)"/>

                            <t t-foreach="lines" t-as="line">
                                <t t-set="current_subtotal" t-value="current_subtotal + line.price_subtotal" groups="account.group_show_line_subtotals_tax_excluded"/>
                                <t t-set="current_subtotal" t-value="current_subtotal + line.price_total" groups="account.group_show_line_subtotals_tax_included"/>

                                <tr t-att-class="'bg-200 font-weight-bold o_line_section' if line.display_type == 'line_section' else 'font-italic o_line_note' if line.display_type == 'line_note' else ''">
                                    <t t-if="not line.display_type" name="account_invoice_line_accountable">
                                        <td name="account_invoice_line_name"><span t-field="line.name" t-options="{'widget': 'text'}"/></td>
                                        <td class="text-right">
                                            <span t-field="line.quantity"/>
                                            <span t-field="line.product_uom_id"  groups="uom.group_uom"/>
                                        </td>
                                        <td t-attf-class="text-right {{ 'd-none d-md-table-cell' if report_type == 'html' else '' }}">
                                            <span class="text-nowrap" t-field="line.price_unit"/>
                                        </td>
                                        <td t-if="display_discount" t-attf-class="text-right {{ 'd-none d-md-table-cell' if report_type == 'html' else '' }}">
                                            <span class="text-nowrap" t-field="line.discount"/>
                                        </td>
                                        <td t-attf-class="text-left {{ 'd-none d-md-table-cell' if report_type == 'html' else '' }}">
                                            <span t-esc="', '.join(map(lambda x: (x.description or x.name), line.tax_ids))" id="line_tax_ids"/>
                                        </td>
                                        <td class="text-right o_price_total">
                                            <span class="text-nowrap" t-field="line.price_subtotal" groups="account.group_show_line_subtotals_tax_excluded"/>
                                            <span class="text-nowrap" t-field="line.price_total" groups="account.group_show_line_subtotals_tax_included"/>
                                        </td>
                                    </t>
                                    <t t-if="line.display_type == 'line_section'">
                                        <td colspan="99">
                                            <span t-field="line.name" t-options="{'widget': 'text'}"/>
                                        </td>
                                        <t t-set="current_section" t-value="line"/>
                                        <t t-set="current_subtotal" t-value="0"/>
                                    </t>
                                    <t t-if="line.display_type == 'line_note'">
                                        <td colspan="99">
                                            <span t-field="line.name" t-options="{'widget': 'text'}"/>
                                        </td>
                                    </t>
                                </tr>

                                <t t-if="current_section and (line_last or lines[line_index+1].display_type == 'line_section')">
                                    <tr class="is-subtotal text-right">
                                        <td colspan="99">
                                            <strong class="mr16">Subtotal</strong>
                                            <span
                                                t-esc="current_subtotal"
                                                t-options='{"widget": "monetary", "display_currency": o.currency_id}'
                                            />
                                        </td>
                                    </tr>
                                </t>
                            </t>
                        </tbody>
                    </table>

                    <div class="clearfix">
                        <div id="total" class="row">
                            <div t-attf-class="#{'col-6' if report_type != 'html' else 'col-sm-7 col-md-6'} ml-auto">
                                <table class="table table-sm" style="page-break-inside: avoid;">

                                    <!--Tax totals-->
                                    <t t-set="tax_totals" t-value="json.loads(o.tax_totals_json)"/>

                                    <t t-call="account.document_tax_totals"/>

                                    <!--Payments-->
                                    <t t-if="print_with_payments">
                                        <t t-if="o.payment_state != 'invoicing_legacy'">
                                            <t t-set="payments_vals" t-value="o.sudo()._get_reconciled_info_JSON_values()"/>
                                            <t t-foreach="payments_vals" t-as="payment_vals">
                                                <tr>
                                                    <td>
                                                        <i class="oe_form_field text-right oe_payment_label">Paid on <t t-esc="payment_vals['date']" t-options='{"widget": "date"}'/></i>
                                                    </td>
                                                    <td class="text-right">
                                                        <span t-esc="payment_vals['amount']" t-options='{"widget": "monetary", "display_currency": o.currency_id}'/>
                                                    </td>
                                                </tr>
                                            </t>
                                            <!-- <t t-if="len(payments_vals) > 0"> -->
                                            <t>
                                                <!-- <tr>
                                                    <td ><strong style="font-color: black;">Amount in USD</strong></td>
                                                    <td class="text-right">
                                                        <span t-field="o.usd"/><strong> USD</strong>
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td ><strong style="font-color: black;">Amount in EUR</strong></td>
                                                    <td class="text-right">
                                                        <span t-field="o.eur"/><strong> EUR</strong>
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td ><strong style="font-color: black;">Amount in GBP</strong></td>
                                                    <td class="text-right">
                                                        <span t-field="o.gbp"/><strong> GBP</strong>
                                                    </td>
                                                </tr> -->
                                                <tr>
                                                    <td><strong>Amount Due</strong></td>
                                                    <td class="text-right">
                                                        <span t-field="o.amount_residual"/>
                                                    </td>
                                                </tr>
                                               
                                            </t>
                                        </t>
                                    </t>
                                </table>
                            </div>
                        </div>
                    </div>
                    <br/>
                    <div class="o_readonly">
                    
                    <div class="row">
                        <div class="col-6 deepu-pymt">
                            <h5><strong>Payment Information</strong></h5>
                            <t t-if="o.show_sib_account">
                            <p>
                                KurierVogel Freight Broker LLC<br/>
                                SIB Bank, Muwaileh Branch<br/>
                                Account number- (AED ) 0012188207001<br/>
                                IBAN No: AE750410000012188207001
                            </p>
                            
                            </t>
                            <t t-else="">
                                <p> KurierVogel Freight Broker LLC<br/>
                                ADCB Bank, Al Riggha Road Branch<br/>
                                Account number- (AED ) 12327224920001<br/>
                                IBAN No: AE920030012327224920001
                            </p>
                            </t>
                            
                        </div>
                        <div class="col-6 text-right deepu-cnt" >
                            <p style="color:black;">Sales Person : <span t-field="o.invoice_user_id"/><br/>Email: cs@kuriervogel.com </p>
                            <!-- <h5>Contact Information</h5>
                            <p> Kurier Vogel Freight Broker LLC,<br/>
                                Al Fajer Complex, 1st Floor,<br/>
                                Office  No. 105/14, P.O. Box 124432,<br/>
                                Oud Metha,Dubai, United Arab Emirates. <br/>
                            </p> -->
                        </div>
                    </div>
                    <br/>
                    <strong style="font-size:11px;">THE AMOUNT INDICATED IN THIS INVOICE IS LEGAL CONFIRMATION OF COMMERCIAL DEBT, UNLESS OBJECTED WITHIN 10 DAYS OF THE DATE OF INVOICE. ALL TRANSACTIONS ARE SUBJECT TO DUBAI LAW AND DUBAI COURTS JURISDICTION.</strong>
            
                    </div>
                    
                    <p t-if="o.move_type in ('out_invoice', 'in_refund') and o.payment_reference" name="payment_communication">
                        Please use the following communication for your payment : <b><span t-field="o.payment_reference"/></b>
                    </p>
                    <div t-if="not is_html_empty(o.custom_terms)" name="comment">
                        <span style="fint-size: 12px !important;" t-field="o.custom_terms"/>
                    </div>
                    <p t-if="o.invoice_payment_term_id" name="payment_term">
                        <span t-field="o.invoice_payment_term_id.note"/>
                    </p>
                    <div t-if="not is_html_empty(o.narration)" name="comment">
                        <span t-field="o.narration"/>
                    </div>
                    <p t-if="not is_html_empty(o.fiscal_position_id.note)" name="note">
                        <span t-field="o.fiscal_position_id.note"/>
                    </p>
                    <p t-if="o.invoice_incoterm_id" name="incoterm">
                        <strong>Incoterm: </strong><span t-field="o.invoice_incoterm_id.code"/> - <span t-field="o.invoice_incoterm_id.name"/>
                    </p>
                    <div id="qrcode" t-if="o.display_qr_code and o.amount_residual > 0">
                        <p t-if="qr_code_urls.get(o.id)">
                            <strong class="text-center">Scan me with your banking app.</strong><br/><br/>
                            <img class="border border-dark rounded" t-att-src="qr_code_urls[o.id]"/>
                        </p>
                    </div>
                </div>
            </t>
        </template>
    </data>
</odoo>
    